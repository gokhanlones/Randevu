
<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Randevu AI</title>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<script>
(function(){
emailjs.init("bUqxAYFWuXWTy5nKT");
})();
</script>

<style>
:root{
--gold:#d4af37;
--gold-light:#f1d77a;
}
body{
margin:0;
font-family:Arial, sans-serif;
background:linear-gradient(160deg,#0d0d0d,#1a1a1a);
color:white;
padding:20px;
}
h1{
text-align:center;
color:var(--gold);
margin-bottom:30px;
}
.salon-card{
background:#181818;
padding:20px;
border-radius:15px;
margin-bottom:20px;
box-shadow:0 10px 30px rgba(0,0,0,0.5);
}
button{
width:100%;
padding:12px;
border:none;
border-radius:10px;
font-weight:bold;
background:linear-gradient(90deg,var(--gold),var(--gold-light));
cursor:pointer;
margin-top:10px;
}
.modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,0.85);
justify-content:center;
align-items:center;
}
.modal-content{
background:#181818;
padding:25px;
border-radius:15px;
width:90%;
max-width:400px;
}
input{
width:100%;
padding:10px;
margin-bottom:12px;
border-radius:8px;
border:none;
}
.services{
background:#111;
padding:15px;
border-radius:10px;
margin-bottom:15px;
}
.services h4{
margin:0 0 12px 0;
color:var(--gold);
}
.service-item{
display:flex;
align-items:center;
gap:10px;
margin-bottom:10px;
font-size:14px;
}
.service-item input{
width:18px;
height:18px;
accent-color:var(--gold);
}
.close-btn{
background:#444;
color:white;
}
</style>
</head>

<body>

<h1>Kuaför Seç</h1>
<div id="salons"></div>

<div class="modal" id="bookingModal">
<div class="modal-content">

<h3 id="selectedSalonTitle"></h3>

<input type="date" id="date">
<input type="time" id="time">
<input type="text" id="fullname" placeholder="Ad Soyad">
<input type="tel" id="phone" placeholder="Telefon">
<input type="email" id="email" placeholder="E-posta">

<div class="services">
<h4>Yapılacak İşlemler</h4>

<label class="service-item">
<input type="checkbox" value="Saç Kesimi">
<span>Saç Kesimi</span>
</label>

<label class="service-item">
<input type="checkbox" value="Sakal Tıraşı">
<span>Sakal Tıraşı</span>
</label>

<label class="service-item">
<input type="checkbox" value="Saç Boyama">
<span>Saç Boyama</span>
</label>

<label class="service-item">
<input type="checkbox" value="Cilt Bakımı">
<span>Cilt Bakımı</span>
</label>

</div>

<button onclick="sendBooking()">Randevuyu Onayla</button>
<button class="close-btn" onclick="closeModal()">İptal</button>

</div>
</div>

<script>

const salonData = {
"Urban Barber": {lat:40.9906,lng:29.0293,address:"Kadıköy İstanbul"},
"Gold Salon": {lat:41.0430,lng:29.0041,address:"Beşiktaş İstanbul"},
"Royal Hair": {lat:41.0369,lng:28.9850,address:"Beyoğlu İstanbul"},
"Elite Barber": {lat:41.0602,lng:28.9870,address:"Şişli İstanbul"},
"Diamond Hair": {lat:40.9800,lng:28.8750,address:"Bakırköy İstanbul"}
};

let selectedSalon = "";
const container = document.getElementById("salons");

Object.keys(salonData).forEach(salon=>{
container.innerHTML += `
<div class="salon-card">
<h3>${salon}</h3>
<button onclick="openBooking('${salon}')">Randevu Al</button>
</div>`;
});

function openBooking(name){
selectedSalon = name;
document.getElementById("selectedSalonTitle").innerText = name;
document.getElementById("bookingModal").style.display="flex";
}

function closeModal(){
document.getElementById("bookingModal").style.display="none";
}

function sendBooking(){

const date = document.getElementById("date").value;
const time = document.getElementById("time").value;
const name = document.getElementById("fullname").value;
const phone = document.getElementById("phone").value;
const email = document.getElementById("email").value;

if(!date || !time || !name || !phone || !email){
alert("Lütfen tüm alanları doldurun");
return;
}

const selectedServices = Array.from(
document.querySelectorAll('.services input:checked')
).map(cb=>cb.value);

if(selectedServices.length === 0){
alert("En az bir işlem seçmelisiniz");
return;
}

let servicesHtml = "";
selectedServices.forEach(service=>{
servicesHtml += `
<div style="
display:inline-block;
padding:8px 14px;
margin:5px 5px 0 0;
background:#d4af37;
color:#000;
border-radius:20px;
font-weight:bold;
font-size:13px;">
${service}
</div>`;
});

const coords = salonData[selectedSalon];
const mapsLink = `https://www.google.com/maps?q=${coords.lat},${coords.lng}`;

const startDateTime = date.replaceAll("-","") + "T" + time.replace(":","") + "00";
const endDateTime = date.replaceAll("-","") + "T" + (parseInt(time.split(":")[0])+1).toString().padStart(2,'0') + time.split(":")[1] + "00";

const bookingId = Date.now();

const params = {
salon:selectedSalon,
date:date,
time:time,
name:name,
phone:phone,
email:email,
services:servicesHtml,
calendar_start:startDateTime,
calendar_end:endDateTime,
location:salonData[selectedSalon].address,
maps_link:mapsLink,
booking_id:bookingId
};

Promise.all([
emailjs.send("service_8qoocwi","template_03obhwb",params),
emailjs.send("service_8qoocwi","template_08wro98",params)
])
.then(()=>{
alert("Randevu başarıyla oluşturuldu!");
closeModal();
})
.catch(error=>{
console.log(error);
alert("Mail gönderilirken hata oluştu!");
});

}

</script>

</body>
</html>
