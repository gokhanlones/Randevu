<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Randevu AI</title>

<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>

<script>
emailjs.init("bUqxAYFWuXWTy5nKT");
</script>

<style>
:root{
--gold:#d4af37;
--gold-light:#f1d77a;
}

body{
margin:0;
font-family:Arial, sans-serif;
background:linear-gradient(160deg,#0d0d0d,#1a1a1a);
color:white;
padding:20px;
}

h1{
text-align:center;
color:var(--gold);
margin-bottom:30px;
}

.salon-card{
background:#181818;
padding:20px;
border-radius:15px;
margin-bottom:20px;
box-shadow:0 10px 30px rgba(0,0,0,0.5);
}

button{
width:100%;
padding:12px;
border:none;
border-radius:10px;
font-weight:bold;
background:linear-gradient(90deg,var(--gold),var(--gold-light));
cursor:pointer;
}

.modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,0.85);
justify-content:center;
align-items:center;
}

.modal-content{
background:#181818;
padding:25px;
border-radius:15px;
width:90%;
max-width:400px;
}

input{
width:100%;
padding:10px;
margin-bottom:10px;
border-radius:8px;
border:none;
}

.close-btn{
margin-top:10px;
background:#444;
color:white;
}
</style>
</head>

<body>

<h1>Kuaför Seç</h1>
<div id="salons"></div>

<div class="modal" id="bookingModal">
<div class="modal-content">
<h3 id="selectedSalonTitle"></h3>

<input type="date" id="date">
<input type="time" id="time">
<input type="text" id="fullname" placeholder="Ad Soyad">
<input type="tel" id="phone" placeholder="Telefon">
<input type="email" id="email" placeholder="E-posta">

<button id="confirmBtn">Randevuyu Onayla</button>
<button class="close-btn" id="cancelBtn">İptal</button>

</div>
</div>

<script>

/* =========================
   CONFIG
========================= */

const CONFIG = {
serviceID: "service_8qoocwi",
adminTemplateID: "template_03obhwb",
customerTemplateID: "template_MUSTERIID", // buraya yaz
salons: [
"Urban Barber",
"Gold Salon",
"Royal Hair",
"Elite Barber",
"Diamond Hair"
]
};

/* =========================
   STATE
========================= */

let selectedSalon = "";

/* =========================
   INIT
========================= */

document.addEventListener("DOMContentLoaded", () => {
renderSalons();
bindUI();
});

/* =========================
   UI RENDER
========================= */

function renderSalons(){
const container = document.getElementById("salons");
container.innerHTML = "";

CONFIG.salons.forEach(salon=>{
const card = document.createElement("div");
card.className = "salon-card";

card.innerHTML = `
<h3>${salon}</h3>
<button data-salon="${salon}">Randevu Al</button>
`;

container.appendChild(card);
});
}

/* =========================
   UI EVENTS
========================= */

function bindUI(){

document.getElementById("salons").addEventListener("click", e=>{
if(e.target.tagName === "BUTTON"){
openModal(e.target.dataset.salon);
}
});

document.getElementById("cancelBtn").addEventListener("click", closeModal);
document.getElementById("confirmBtn").addEventListener("click", handleBooking);

}

/* =========================
   MODAL
========================= */

function openModal(salon){
selectedSalon = salon;
document.getElementById("selectedSalonTitle").innerText = salon;
document.getElementById("bookingModal").style.display = "flex";
}

function closeModal(){
document.getElementById("bookingModal").style.display = "none";
}

/* =========================
   FORM
========================= */

function getFormData(){

return {
salon: selectedSalon,
date: document.getElementById("date").value,
time: document.getElementById("time").value,
name: document.getElementById("fullname").value,
phone: document.getElementById("phone").value,
email: document.getElementById("email").value
};

}

function validateForm(data){
return data.date && data.time && data.name && data.phone && data.email;
}

/* =========================
   BOOKING FLOW
========================= */

async function handleBooking(){

const data = getFormData();

if(!validateForm(data)){
alert("Lütfen tüm alanları doldurun");
return;
}

try{

// 1️⃣ Admin mail
await emailjs.send(CONFIG.serviceID, CONFIG.adminTemplateID, data);

// 2️⃣ Customer mail
await emailjs.send(CONFIG.serviceID, CONFIG.customerTemplateID, data);

alert("Randevu başarıyla oluşturuldu!");
closeModal();

}catch(error){
console.error(error);
alert("Mail gönderilemedi!");
}

}

</script>

</body>
</html>
