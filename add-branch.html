            <h1><i class="fas fa-store"></i> Şube Ekle</h1>
            <p>Yeni şube bilgilerini doldur ve kaydet</p>
        </div>

        <div class="form-card">
            <div id="errorBox" class="error-message"></div>
            <div id="successBox" class="success-message"></div>

            <form id="branchForm">
                <!-- ŞUBE BİLGİLERİ -->
                <div class="form-section">
                    <h3><i class="fas fa-building"></i> Şube Bilgileri</h3>

                    <div class="form-group">
                        <label for="branchName">Şube Adı *</label>
                        <input type="text" id="branchName" name="branchName" placeholder="Örn: Stilix İzmit" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="branchCode">Şube Kodu</label>
                            <input type="text" id="branchCode" name="branchCode" placeholder="Örn: IZMT01">
                        </div>
                        <div class="form-group">
                            <label for="status">Durum</label>
                            <select id="status" name="status">
                                <option value="active" selected>Aktif</option>
                                <option value="passive">Pasif</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- İLETİŞİM -->
                <div class="form-section">
                    <h3><i class="fas fa-phone"></i> İletişim</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Telefon *</label>
                            <input type="tel" id="phone" name="phone" placeholder="05xx xxx xx xx" required>
                        </div>
                        <div class="form-group">
                            <label for="email">E-posta</label>
                            <input type="email" id="email" name="email" placeholder="sube@stilix.com">
                        </div>
                    </div>
                </div>

                <!-- ADRES -->
                <div class="form-section">
                    <h3><i class="fas fa-location-dot"></i> Adres</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="city">Şehir *</label>
                            <input type="text" id="city" name="city" placeholder="Örn: Kocaeli" required>
                        </div>
                        <div class="form-group">
                            <label for="district">İlçe *</label>
                            <input type="text" id="district" name="district" placeholder="Örn: Başiskele" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="address">Açık Adres *</label>
                        <input type="text" id="address" name="address" placeholder="Mahalle, cadde, sokak, no..." required>
                    </div>
                </div>

                <!-- SORUMLU -->
                <div class="form-section">
                    <h3><i class="fas fa-user-tie"></i> Şube Sorumlusu</h3>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="managerName">Ad Soyad *</label>
                            <input type="text" id="managerName" name="managerName" placeholder="Örn: Ayşe Yılmaz" required>
                        </div>
                        <div class="form-group">
                            <label for="managerPhone">Sorumlu Telefonu</label>
                            <input type="tel" id="managerPhone" name="managerPhone" placeholder="05xx xxx xx xx">
                        </div>
                    </div>
                </div>

                <button type="submit" class="btn-primary">
                    <i class="fas fa-check"></i> Şubeyi Kaydet
                </button>

                <a href="index.html" class="btn-secondary">
                    <i class="fas fa-arrow-left"></i> Geri Dön
                </a>
            </form>
        </div>
    </div>

    <script>
        // Senin Apps Script URL'in (örnek)
        const API_URL = "https://script.google.com/macros/s/AKfycbyoCnb1_a3nFjOkbk51btfzqSYp09T75IbTNgyvEKYQUbWXP__l2mpKpmraoAmZxOd0/exec";

        const form = document.getElementById("branchForm");
        const errorBox = document.getElementById("errorBox");
        const successBox = document.getElementById("successBox");

        function showError(msg) {
            successBox.classList.remove("show");
            errorBox.textContent = msg;
            errorBox.classList.add("show");
        }

        function showSuccess(msg) {
            errorBox.classList.remove("show");
            successBox.textContent = msg;
            successBox.classList.add("show");
        }

        function getFormData() {
            return {
                branchName: document.getElementById("branchName").value.trim(),
                branchCode: document.getElementById("branchCode").value.trim(),
                status: document.getElementById("status").value,
                phone: document.getElementById("phone").value.trim(),
                email: document.getElementById("email").value.trim(),
                city: document.getElementById("city").value.trim(),
                district: document.getElementById("district").value.trim(),
                address: document.getElementById("address").value.trim(),
                managerName: document.getElementById("managerName").value.trim(),
                managerPhone: document.getElementById("managerPhone").value.trim(),
            };
        }

        function validate(data) {
            if (!data.branchName) return "Şube adı zorunlu.";
            if (!data.phone) return "Telefon zorunlu.";
            if (!data.city) return "Şehir zorunlu.";
            if (!data.district) return "İlçe zorunlu.";
            if (!data.address) return "Adres zorunlu.";
            if (!data.managerName) return "Şube sorumlusu adı zorunlu.";
            return null;
        }

        form.addEventListener("submit", async (e) => {
            e.preventDefault();

            const data = getFormData();
            const err = validate(data);
            if (err) return showError(err);

            // UI
            const btn = form.querySelector("button[type='submit']");
            const oldHtml = btn.innerHTML;
            btn.disabled = true;
            btn.innerHTML = `<i class="fas fa-spinner fa-spin"></i> Kaydediliyor...`;

            try {
                // Burada action adını senin API'ne göre ayarlarsın:
                // örn: action: "addBranch" / "createBranch" vs.
                const payload = { action: "addBranch", data };

                const res = await fetch(API_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload),
                });

                const json = await res.json().catch(() => null);

                if (!json) {
                    showError("Sunucudan geçerli yanıt alınamadı.");
                } else if (json.success) {
                    showSuccess(json.message || "Şube başarıyla kaydedildi.");
                    form.reset();
                } else {
                    showError(json.message || "Şube kaydedilemedi.");
                }
            } catch (ex) {
                showError("Bağlantı hatası. Lütfen tekrar dene.");
            } finally {
                btn.disabled = false;
                btn.innerHTML = oldHtml;
            }
        });
    </script>
</body>
</html>
