<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Email Doğrulama</title>

<style>
body {
    margin:0;
    font-family:'Segoe UI', sans-serif;
    background:#F3F4F6;
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.card {
    background:white;
    padding:40px;
    border-radius:14px;
    width:100%;
    max-width:400px;
    text-align:center;
    box-shadow:0 10px 30px rgba(0,0,0,0.08);
}

h2 {
    margin-bottom:20px;
}

.message {
    margin-top:15px;
    font-size:14px;
}
</style>
</head>

<body>

<div class="card">
    <h2>Email Doğrulanıyor...</h2>
    <div class="message" id="message">Lütfen bekleyin...</div>
</div>

<script>
async function verify() {

    const params = new URLSearchParams(window.location.search);
    const token = params.get("token");

    if (!token) {
        document.getElementById("message").innerText = "Geçersiz link.";
        return;
    }

    try {

        const response = await fetch("https://script.google.com/macros/s/AKfycbzDxnb-3boRNy0D937jhItJC8_6z5QbP0VOhJfUfPKLiU3aPkXtyPobCjhNXsC7AfR7Mg/exec", {
            method: "POST",
            body: JSON.stringify({
                action: "verifyToken",
                token: token
            })
        });

        const result = await response.json();

        document.getElementById("message").innerText = result.message;

        if (result.success) {
            setTimeout(() => {
                window.location.href = "giris.html";
            }, 3000);
        }

    } catch (err) {
        document.getElementById("message").innerText = "Sunucu hatası.";
    }
}

verify();
</script>

</body>
</html>
